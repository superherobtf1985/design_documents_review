# テーブル定義書Q3

## 全体
- テーブル名は先頭小文字・複数形、復号単語はスネークケースで定義しましょう。
- カラム名の先頭にテーブル名をつけないようにしましょう。 `user_email` → `user`
- ステータスのようなデータをstringで持つのは、
全角文字でデータサイズが大きくなる
文字列を変えたくなった場合、大量のレコードをUPDATEする必要がある
などの理由で、好ましくありません。
「enum」で調べてみてください。
- PKは基本的に全てindexになるので、追加をお願いします。
- 配送先の情報はどこで管理しますか？ER図にも反映されていないようでしたらER図の方も修正お願いします。
- 全てのテーブルで"created_at"が「ユーザー登録日時」に、"updated_at"が「ユーザー更新日時」となっています。修正お願いします。
- "id"がないテーブルが存在しているので、追加をお願いします。

## users
- user_l_name, user_f_name, user_telのように省略はせずに書くようにお願いします。
- 自分の電話番号を試しに電卓で打ってみてみましょう。
正しく表示されましたか？
基本的にこれらの項目は、
「先頭のゼロに意味がある」
「計算に使う値ではない」
という理由で、integerでは持たないことが多いです。
- 名前nullを許可しないなどのバリデーションも追加しましょう。
- 性 → 姓に修正お願いします。
- 退会ステータスが"member_status"となっているが、何のステータスか分かりづらいです。"is_deleted"などが良いでしょう。
- 退会ステータスのデータ型を見直す必要があります。退会or登録のどちらかなのでbool型を使いましょう。

## products
- アーティストid, レーベルid, ジャンルidにFKがありません。追加をお願いします。
- ジャケット画像のカラム名は末尾にidが入ります。以前学習したrefileについて見直しましょう。
- カラムの頭についている「cd」はテーブル名のproductと同意なので不要です。
- productsが親なので、disc_idは不要です。
- 発売日カラムが存在しません。追加をお願いします。
- 在庫数カラムがありますが、商品が入荷するたびに数値を変更するのでしょうか？ ER図にも反映されていないようでしたらER図の方も修正お願いします。
- 在庫数から在庫があるかないかは判断できますが、statusとして持つ理由はありますか？

## discs
- FKは単数形です。product_idに修正お願いします。
- numも省略せずに記載をお願いします。
- track_noは曲順管理に使用するので、定義するテーブルが違います。ER図にも反映されていないようでしたらER図の方も修正お願いします。
- 同一商品内で異なるディスクかどうかの判断はどのようにしますか？ER図にも反映されていないようでしたらER図の方も修正お願いします。

## songs
- PKのidがありません。追加をお願いします。
- 曲名のカラム名は「(曲の)名前」です。命名の変更をお願いします。
- 曲名のカラムがinteger型になっていますが、正しいですか？
- 曲順はどのように管理しますか？ER図にも反映されていないようでしたらER図の方も修正お願いします。

## labels
- PKのidがありません。追加をお願いします。
- レーベル名のカラム名は「(レーベルの)名前」です。命名の変更をお願いします。
- テーブル同士の関係性ですが、labelsが親テーブル、productsが子テーブルとなります。子テーブルが親テーブルのFKを持つ形になるので、products_idは不要です。


## artists
- PKのidがありません。追加をお願いします。
- アーティスト名のカラム名は「(アーティストの)名前」です。命名の変更をお願いします。
- アーティストのカラムがinteger型になっていますが、正しいですか？
- テーブル同士の関係性ですが、artistsが親テーブル、productsが子テーブルとなります。子テーブルが親テーブルのFKを持つ形になるので、products_idは不要です。

## genres
- PKのidがありません。追加をお願いします。
- ジャンル名のカラム名は「(ジャンルの)名前」です。命名の変更をお願いします。
- テーブル同士の関係性ですが、genresが親テーブル、productsが子テーブルとなります。子テーブルが親テーブルのFKを持つ形になるので、products_idは不要です。
- アーティストのカラムがinteger型になっていますが、正しいですか？

## cart_items
- PKのidがありません。追加をお願いします。
- buy numは省略せず、スネークケースで書きましょう。また、「(購入)枚数」なのでbuyではなくamountなどが適切です。
- 商品idのデータ型が抜けてしまっています。記入をお願いします。
- 商品のリレーションを用いて、小計は計算できるため、subtotalは不要です。削除をお願いします。

## Buy details
- テーブル定義のルールに従い、テーブル名は先頭小文字・複数形、復号単語はスネークケースで記述しましょう。
- テーブル名、buyではなく「受注」という意味の入った「order」などが適切です。変更をお願いします。
- 注文idや商品idのFKカラムがありません。ER図に従って追加をお願いします。
- buy numは省略せず、スネークケースで書きましょう。また、「buy」ではなく「order」などが適切です。
- 注文した商品の情報を保存するカラムが存在しません。追加をお願いします。ER図にも反映されていないようでしたらER図の方も修正お願いします

## Buy
- テーブル名を上の指摘にのっとり変更をお願いします。
- 支払い方法はenumを使って定義しましょう。
- 支払い合計に「stock」という単語は不適切です。適切な単語に変更をお願いします。
- 購入日カラムは不要です。削除をお願いします。
- 配送ステータスが存在しません。追加をお願いします。ER図にも反映されていないようでしたらER図の方も修正お願いします。
- テーブル同士の関係性ですが、このテーブルが親テーブル、buy_detailsが子テーブルとなります。子テーブルが親テーブルのFKを持つ形になるので、buy_details_idは不要です。
- 支払い方法の「pay」は、「支払い」の何を表しているのかイメージしづらいので「支払い方法」とわかる命名に変更しましょう。

# テーブル定義書Q4
## 全体
- カラム名の先頭にテーブル名をつけないようにしましょう。 `user_email` → `user`
- PKは基本的に全てindexになるので、追加をお願いします。

## users
- user_l_name, user_f_name, user_telのように省略はせずに書くようにお願いします。
- 細かいですが、「性」 → 「姓」です。
- 退会ステータスが"member_status"となっているが、なんのステータスか分かりづらいです。"is_deleted"などが良いでしょう。
・enum の記述ですが、「データ型」は「integer」にして、備考欄に例の様に記述してください。
例 1:sale(販売中),0:(sold_out)売り切れ

## ships
- 「tel」は省略せずに記述をお願いします。
- 顧客の情報に合わせて「姓」「名」など分けましょう。

## products
- ディスクid, アーティストid, レーベルid, ジャンルidにFKが存在しません。追加をお願いします。
- ジャケット画像はtext型の方が望ましいです。変更をお願いします。
- 在庫数カラムがありますが、商品が入荷するたびに数値を変更するのでしょうか？ ER図にも反映されていないようでしたらER図の方も修正お願いします。
- 発売日カラムが存在しません。追加をお願いします。

## discs
- 「num」は省略せずに記述をお願いします。

## songs
- 曲名のカラム名は「(曲の)名前」です。命名の変更をお願いします。

## labels
- レーベル名のカラム名は「(レーベルの)名前」です。命名の変更をお願いします。

## artists
- アーティスト名のカラム名は「(アーティストの)名前」です。命名の変更をお願いします。

## genres
- ジャンル名のカラム名は「(ジャンルの)名前」です。命名の変更をお願いします。

## sell details
- テーブル定義のルールに従い、テーブル名は先頭小文字・複数形、復号単語はスネークケースで記述しましょう。
- テーブル名、「sell」ではなく「受注」という意味の入った「order」などが適切です。変更をお願いします。
- product_idはFKです。追加をお願いします。
- numは省略せずに記述をお願いします。
- 商品の詳細の情報(名前やジャケット画像などなど)をもっておく必要があります。受注後に商品情報が変更された場合このテーブルのデータも変わってしまいます。
- 購入時の価格が必要です。追加をお願いします。

## sells
- テーブル名、「sell」ではなく「受注」という意味の入った「order」などが適切です。変更をお願いします。
- 支払い方法の「pay」は、「支払い」の何を表しているのかイメージしづらいので「支払い方法」とわかる命名に変更しましょう。
- 支払い合計の「total」は、何の「合計」を表しているのかイメージしづらいので「金額」という意味が入った命名が適切です。
- telは省略せずに記述をお願いします。
- sell_details_idは、リレーションが逆になるので必要ありません。
